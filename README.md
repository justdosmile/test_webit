1 и 2 задания реализованы в файле code.php

3 задание:
- GetFields() лишний запрос к БД, переменная $fields нигде не участвует. В целом запрос можно переделать, избежать перегружающего GetNextElement, собирая сразу через $arSelectFields названия брендов PROPERTY_BRAND.NAME
- Вероятно будет дублирование брендов, т.к. нет проверки на присутствие такого бренда в массиве $brands
